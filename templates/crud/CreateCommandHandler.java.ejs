package <%= packageName %>.<%= moduleName %>.application.usecases;

import <%= packageName %>.<%= moduleName %>.application.commands.Create<%= aggregateName %>Command;
import <%= packageName %>.<%= moduleName %>.domain.models.entities.<%= aggregateName %>;
import <%= packageName %>.<%= moduleName %>.domain.repositories.<%= aggregateName %>Repository;
import <%= packageName %>.<%= moduleName %>.application.mappers.<%= aggregateName %>ApplicationMapper;
import <%= packageName %>.shared.domain.annotations.ApplicationComponent;
import <%= packageName %>.shared.domain.interfaces.CommandHandler;
import lombok.extern.slf4j.Slf4j;
import org.springframework.transaction.annotation.Transactional;

/**
 * Create<%= aggregateName %>CommandHandler
 * Handles the creation of a new <%= aggregateName %> aggregate
 */
@Slf4j
@ApplicationComponent
public class Create<%= aggregateName %>CommandHandler implements CommandHandler<Create<%= aggregateName %>Command> {

    private final <%= aggregateName %>Repository repository;
    private final <%= aggregateName %>ApplicationMapper mapper;

    public Create<%= aggregateName %>CommandHandler(<%= aggregateName %>Repository repository, <%= aggregateName %>ApplicationMapper mapper) {
        this.repository = repository;
        this.mapper = mapper;
    }

    @Override
    @Transactional
    public void handle(Create<%= aggregateName %>Command command) {
        log.info("Handling Create<%= aggregateName %>Command: {}", command);
        
        // Build <%= aggregateName %> aggregate from command using mapper
        <%= aggregateName %> entity = mapper.fromCommand(command);
        
        // Save aggregate
        <%= aggregateName %> saved = repository.save(entity);
        log.info("<%= aggregateName %> created successfully with id: {}", saved.getId());
    }
}
